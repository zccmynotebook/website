<html>
  <body>
    <div></div>
    <section></section>
    <button>close es</button>
    <script>
      let div=document.querySelector('div')
      let bt=document.querySelector('button')
      let es=new EventSource('events')
      es.onopen=function(){
        div.innerHTML='open</br>'
      }
      es.onmessage=function(e){
        div.innerHTML+=`${e.data}</br>`
      }
      es.onerror=function(){
        console.log(123,arguments)
        div.innerHTML+=`error</br>`
      }
      bt.onclick=function(){
        es.close()
        div.innerHTML+='close</br>'
      }
      let s=document.querySelector('section')
      window.addEventListener('storage',function(v){
        s.innerHTML = v
      })
    </script>
  </body>
</html>